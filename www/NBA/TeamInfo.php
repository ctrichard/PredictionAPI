<?php

require_once 'MyTools.php';


try {


    $InputData = json_decode(file_get_contents('php://input'),true);

    if(!is_numeric($InputData['Season']))
       throw new BadSeason('Bad input : '.$InputData['Season']);


    $Season = intval($InputData['Season']);

    $DomCode = GetTeamCodeFromName($InputData['TeamDom']);
    $VisCode = GetTeamCodeFromName($InputData['TeamVis']);


    $DomFile = file_get_contents(GetTeamFilePath($DomCode,$Season));
    $VisFile = file_get_contents(GetTeamFilePath($VisCode,$Season));

    $ArrayDom = array_map("str_getcsv", explode("\n", $DomFile));
    $ArrayVis = array_map("str_getcsv", explode("\n", $DomFile));

    $response['Success'] = True; 
    print($response);
    unset($response['Dom'][0]);
    unset($response['Vis'][0]);
    $response['Dom'] = json_encode($ArrayDom);
    $response['Vis'] = json_encode($ArrayVis); 

}
// catch( BadInput | FileNotFound $e){
catch( Exception $e){

    $response['Success'] = False; 
    $response['ErrorMessage'] = $e->getMessage();

}
{"Success":true,"Dom":"[[\"Rk\",\"Name\",\"Age\",\"G\",\"GS\",\"MP\",\"FG\",\"FGA\",\"FG%\",\"3P\",\"3PA\",\"3P%\",\"2P\",\"2PA\",\"2P%\",\"eFG%\",\"FT\",\"FTA\",\"FT%\",\"ORB\",\"DRB\",\"TRB\",\"AST\",\"STL\",\"BLK\",\"TOV\",\"PF\",\"PTS\",\"Post\"],[\"1.0\",\"CobyWhite\",\"20.0\",\"69\",\"54.0\",\"2156\",\"375\",\"902\",\"0.416\",\"163\",\"454\",\"0.359\",\"212\",\"448\",\"0.473\",\"0.506\",\"128\",\"142\",\"0.901\",\"28\",\"256\",\"284\",\"328\",\"38\",\"15\",\"156\",\"179\",\"1041\",\"PG\"],[\"2.0\",\"ZachLaVine\",\"25.0\",\"58\",\"58.0\",\"2034\",\"569\",\"1123\",\"0.507\",\"200\",\"477\",\"0.419\",\"369\",\"646\",\"0.571\",\"0.596\",\"253\",\"298\",\"0.849\",\"36\",\"253\",\"289\",\"282\",\"46\",\"27\",\"203\",\"138\",\"1591\",\"SG\"],[\"3.0\",\"PatrickWilliams\",\"19.0\",\"71\",\"71.0\",\"1983\",\"255\",\"528\",\"0.483\",\"54\",\"138\",\"0.391\",\"201\",\"390\",\"0.515\",\"0.534\",\"91\",\"125\",\"0.728\",\"66\",\"261\",\"327\",\"99\",\"64\",\"46\",\"98\",\"126\",\"655\",\"PF\"],[\"4.0\",\"ThaddeusYoung\",\"32.0\",\"68\",\"23.0\",\"1652\",\"370\",\"662\",\"0.559\",\"12\",\"45\",\"0.267\",\"358\",\"617\",\"0.58\",\"0.568\",\"71\",\"113\",\"0.628\",\"168\",\"255\",\"423\",\"291\",\"74\",\"40\",\"137\",\"152\",\"823\",\"PF\"],[\"5.0\",\"GarrettTemple\",\"34.0\",\"56\",\"25.0\",\"1528\",\"158\",\"381\",\"0.415\",\"67\",\"200\",\"0.335\",\"91\",\"181\",\"0.503\",\"0.503\",\"40\",\"50\",\"0.8\",\"29\",\"131\",\"160\",\"124\",\"43\",\"30\",\"58\",\"126\",\"423\",\"SG\"],[\"6.0\",\"LauriMarkkanen\",\"23.0\",\"51\",\"26.0\",\"1317\",\"250\",\"521\",\"0.48\",\"119\",\"296\",\"0.402\",\"131\",\"225\",\"0.582\",\"0.594\",\"76\",\"92\",\"0.826\",\"35\",\"233\",\"268\",\"45\",\"26\",\"15\",\"52\",\"75\",\"695\",\"PF\"],[\"7.0\",\"Tom\\u00e1\\u0161Satoransk\\u00fd\",\"29.0\",\"58\",\"18.0\",\"1307\",\"169\",\"329\",\"0.514\",\"42\",\"118\",\"0.356\",\"127\",\"211\",\"0.602\",\"0.578\",\"67\",\"79\",\"0.848\",\"30\",\"112\",\"142\",\"271\",\"40\",\"14\",\"96\",\"89\",\"447\",\"SG\"],[\"8.0\",\"DenzelValentine\",\"27.0\",\"62\",\"3.0\",\"1036\",\"155\",\"416\",\"0.373\",\"80\",\"242\",\"0.331\",\"75\",\"174\",\"0.431\",\"0.469\",\"16\",\"17\",\"0.941\",\"24\",\"173\",\"197\",\"105\",\"30\",\"7\",\"42\",\"70\",\"406\",\"SG\"],[\"9.0\",\"NikolaVu\\u010devi\\u0107\",\"30.0\",\"26\",\"26.0\",\"848\",\"230\",\"488\",\"0.471\",\"59\",\"152\",\"0.388\",\"171\",\"336\",\"0.509\",\"0.532\",\"40\",\"46\",\"0.87\",\"59\",\"241\",\"300\",\"102\",\"23\",\"20\",\"43\",\"58\",\"559\",\"C\"],[\"10.0\",\"WendellCarterJr.\",\"21.0\",\"32\",\"25.0\",\"792\",\"129\",\"252\",\"0.512\",\"8\",\"22\",\"0.364\",\"121\",\"230\",\"0.526\",\"0.528\",\"82\",\"111\",\"0.739\",\"70\",\"180\",\"250\",\"69\",\"18\",\"24\",\"49\",\"96\",\"348\",\"C\"],[\"11.0\",\"DanielTheis\",\"28.0\",\"23\",\"14.0\",\"574\",\"93\",\"178\",\"0.522\",\"16\",\"57\",\"0.281\",\"77\",\"121\",\"0.636\",\"0.567\",\"28\",\"43\",\"0.651\",\"39\",\"97\",\"136\",\"41\",\"16\",\"14\",\"25\",\"47\",\"230\",\"C\"],[\"12.0\",\"OttoPorter\",\"27.0\",\"25\",\"6.0\",\"540\",\"89\",\"202\",\"0.441\",\"38\",\"95\",\"0.4\",\"51\",\"107\",\"0.477\",\"0.535\",\"31\",\"37\",\"0.838\",\"28\",\"110\",\"138\",\"50\",\"12\",\"4\",\"25\",\"37\",\"247\",\"SF\"],[\"13.0\",\"RyanArcidiacono\",\"26.0\",\"44\",\"0.0\",\"450\",\"49\",\"117\",\"0.419\",\"25\",\"67\",\"0.373\",\"24\",\"50\",\"0.48\",\"0.526\",\"13\",\"20\",\"0.65\",\"5\",\"62\",\"67\",\"56\",\"9\",\"0\",\"10\",\"47\",\"136\",\"PG\"],[\"14.0\",\"DanielGafford\",\"22.0\",\"31\",\"11.0\",\"383\",\"60\",\"87\",\"0.69\",\"0\",\"0\",\"\",\"60\",\"87\",\"0.69\",\"0.69\",\"27\",\"41\",\"0.659\",\"44\",\"59\",\"103\",\"17\",\"11\",\"34\",\"22\",\"54\",\"147\",\"PF\"],[\"15.0\",\"TroyBrownJr.\",\"21.0\",\"13\",\"0.0\",\"237\",\"29\",\"55\",\"0.527\",\"8\",\"24\",\"0.333\",\"21\",\"31\",\"0.677\",\"0.6\",\"5\",\"6\",\"0.833\",\"9\",\"35\",\"44\",\"10\",\"7\",\"2\",\"5\",\"20\",\"71\",\"SF\"],[\"16.0\",\"JavonteGreen\",\"27.0\",\"16\",\"0.0\",\"128\",\"14\",\"31\",\"0.452\",\"3\",\"8\",\"0.375\",\"11\",\"23\",\"0.478\",\"0.5\",\"10\",\"10\",\"1.0\",\"6\",\"13\",\"19\",\"6\",\"10\",\"4\",\"6\",\"13\",\"41\",\"PG\"],[\"17.0\",\"LukeKornet\",\"25.0\",\"13\",\"0.0\",\"94\",\"9\",\"27\",\"0.333\",\"6\",\"23\",\"0.261\",\"3\",\"4\",\"0.75\",\"0.444\",\"2\",\"4\",\"0.5\",\"1\",\"14\",\"15\",\"4\",\"2\",\"7\",\"1\",\"1\",\"26\",\"PF\"],[\"18.0\",\"CristianoFel\\u00edcio\",\"28.0\",\"18\",\"0.0\",\"84\",\"7\",\"13\",\"0.538\",\"0\",\"2\",\"0.0\",\"7\",\"11\",\"0.636\",\"0.538\",\"9\",\"16\",\"0.563\",\"10\",\"16\",\"26\",\"9\",\"4\",\"0\",\"4\",\"10\",\"23\",\"C\"],[\"19.0\",\"Al-FarouqAminu\",\"30.0\",\"6\",\"0.0\",\"67\",\"2\",\"10\",\"0.2\",\"1\",\"6\",\"0.167\",\"1\",\"4\",\"0.25\",\"0.25\",\"4\",\"5\",\"0.8\",\"2\",\"17\",\"19\",\"2\",\"2\",\"0\",\"3\",\"7\",\"9\",\"PF\"],[\"20.0\",\"ChandlerHutchison\",\"24.0\",\"7\",\"0.0\",\"64\",\"5\",\"18\",\"0.278\",\"1\",\"3\",\"0.333\",\"4\",\"15\",\"0.267\",\"0.306\",\"2\",\"2\",\"1.0\",\"1\",\"19\",\"20\",\"4\",\"1\",\"0\",\"5\",\"9\",\"13\",\"SF\"],[\"21.0\",\"AdamMokoka\",\"22.0\",\"14\",\"0.0\",\"56\",\"7\",\"19\",\"0.368\",\"1\",\"10\",\"0.1\",\"6\",\"9\",\"0.667\",\"0.395\",\"0\",\"1\",\"0.0\",\"1\",\"4\",\"5\",\"5\",\"2\",\"1\",\"5\",\"5\",\"15\",\"SG\"],[\"22.0\",\"DevonDotson\",\"21.0\",\"11\",\"0.0\",\"50\",\"11\",\"21\",\"0.524\",\"1\",\"7\",\"0.143\",\"10\",\"14\",\"0.714\",\"0.548\",\"0\",\"0\",\"\",\"2\",\"3\",\"5\",\"7\",\"4\",\"0\",\"0\",\"3\",\"23\",\"PG\"],[null]]","Vis":"[[\"Rk\",\"Name\",\"Age\",\"G\",\"GS\",\"MP\",\"FG\",\"FGA\",\"FG%\",\"3P\",\"3PA\",\"3P%\",\"2P\",\"2PA\",\"2P%\",\"eFG%\",\"FT\",\"FTA\",\"FT%\",\"ORB\",\"DRB\",\"TRB\",\"AST\",\"STL\",\"BLK\",\"TOV\",\"PF\",\"PTS\",\"Post\"],[\"1.0\",\"CobyWhite\",\"20.0\",\"69\",\"54.0\",\"2156\",\"375\",\"902\",\"0.416\",\"163\",\"454\",\"0.359\",\"212\",\"448\",\"0.473\",\"0.506\",\"128\",\"142\",\"0.901\",\"28\",\"256\",\"284\",\"328\",\"38\",\"15\",\"156\",\"179\",\"1041\",\"PG\"],[\"2.0\",\"ZachLaVine\",\"25.0\",\"58\",\"58.0\",\"2034\",\"569\",\"1123\",\"0.507\",\"200\",\"477\",\"0.419\",\"369\",\"646\",\"0.571\",\"0.596\",\"253\",\"298\",\"0.849\",\"36\",\"253\",\"289\",\"282\",\"46\",\"27\",\"203\",\"138\",\"1591\",\"SG\"],[\"3.0\",\"PatrickWilliams\",\"19.0\",\"71\",\"71.0\",\"1983\",\"255\",\"528\",\"0.483\",\"54\",\"138\",\"0.391\",\"201\",\"390\",\"0.515\",\"0.534\",\"91\",\"125\",\"0.728\",\"66\",\"261\",\"327\",\"99\",\"64\",\"46\",\"98\",\"126\",\"655\",\"PF\"],[\"4.0\",\"ThaddeusYoung\",\"32.0\",\"68\",\"23.0\",\"1652\",\"370\",\"662\",\"0.559\",\"12\",\"45\",\"0.267\",\"358\",\"617\",\"0.58\",\"0.568\",\"71\",\"113\",\"0.628\",\"168\",\"255\",\"423\",\"291\",\"74\",\"40\",\"137\",\"152\",\"823\",\"PF\"],[\"5.0\",\"GarrettTemple\",\"34.0\",\"56\",\"25.0\",\"1528\",\"158\",\"381\",\"0.415\",\"67\",\"200\",\"0.335\",\"91\",\"181\",\"0.503\",\"0.503\",\"40\",\"50\",\"0.8\",\"29\",\"131\",\"160\",\"124\",\"43\",\"30\",\"58\",\"126\",\"423\",\"SG\"],[\"6.0\",\"LauriMarkkanen\",\"23.0\",\"51\",\"26.0\",\"1317\",\"250\",\"521\",\"0.48\",\"119\",\"296\",\"0.402\",\"131\",\"225\",\"0.582\",\"0.594\",\"76\",\"92\",\"0.826\",\"35\",\"233\",\"268\",\"45\",\"26\",\"15\",\"52\",\"75\",\"695\",\"PF\"],[\"7.0\",\"Tom\\u00e1\\u0161Satoransk\\u00fd\",\"29.0\",\"58\",\"18.0\",\"1307\",\"169\",\"329\",\"0.514\",\"42\",\"118\",\"0.356\",\"127\",\"211\",\"0.602\",\"0.578\",\"67\",\"79\",\"0.848\",\"30\",\"112\",\"142\",\"271\",\"40\",\"14\",\"96\",\"89\",\"447\",\"SG\"],[\"8.0\",\"DenzelValentine\",\"27.0\",\"62\",\"3.0\",\"1036\",\"155\",\"416\",\"0.373\",\"80\",\"242\",\"0.331\",\"75\",\"174\",\"0.431\",\"0.469\",\"16\",\"17\",\"0.941\",\"24\",\"173\",\"197\",\"105\",\"30\",\"7\",\"42\",\"70\",\"406\",\"SG\"],[\"9.0\",\"NikolaVu\\u010devi\\u0107\",\"30.0\",\"26\",\"26.0\",\"848\",\"230\",\"488\",\"0.471\",\"59\",\"152\",\"0.388\",\"171\",\"336\",\"0.509\",\"0.532\",\"40\",\"46\",\"0.87\",\"59\",\"241\",\"300\",\"102\",\"23\",\"20\",\"43\",\"58\",\"559\",\"C\"],[\"10.0\",\"WendellCarterJr.\",\"21.0\",\"32\",\"25.0\",\"792\",\"129\",\"252\",\"0.512\",\"8\",\"22\",\"0.364\",\"121\",\"230\",\"0.526\",\"0.528\",\"82\",\"111\",\"0.739\",\"70\",\"180\",\"250\",\"69\",\"18\",\"24\",\"49\",\"96\",\"348\",\"C\"],[\"11.0\",\"DanielTheis\",\"28.0\",\"23\",\"14.0\",\"574\",\"93\",\"178\",\"0.522\",\"16\",\"57\",\"0.281\",\"77\",\"121\",\"0.636\",\"0.567\",\"28\",\"43\",\"0.651\",\"39\",\"97\",\"136\",\"41\",\"16\",\"14\",\"25\",\"47\",\"230\",\"C\"],[\"12.0\",\"OttoPorter\",\"27.0\",\"25\",\"6.0\",\"540\",\"89\",\"202\",\"0.441\",\"38\",\"95\",\"0.4\",\"51\",\"107\",\"0.477\",\"0.535\",\"31\",\"37\",\"0.838\",\"28\",\"110\",\"138\",\"50\",\"12\",\"4\",\"25\",\"37\",\"247\",\"SF\"],[\"13.0\",\"RyanArcidiacono\",\"26.0\",\"44\",\"0.0\",\"450\",\"49\",\"117\",\"0.419\",\"25\",\"67\",\"0.373\",\"24\",\"50\",\"0.48\",\"0.526\",\"13\",\"20\",\"0.65\",\"5\",\"62\",\"67\",\"56\",\"9\",\"0\",\"10\",\"47\",\"136\",\"PG\"],[\"14.0\",\"DanielGafford\",\"22.0\",\"31\",\"11.0\",\"383\",\"60\",\"87\",\"0.69\",\"0\",\"0\",\"\",\"60\",\"87\",\"0.69\",\"0.69\",\"27\",\"41\",\"0.659\",\"44\",\"59\",\"103\",\"17\",\"11\",\"34\",\"22\",\"54\",\"147\",\"PF\"],[\"15.0\",\"TroyBrownJr.\",\"21.0\",\"13\",\"0.0\",\"237\",\"29\",\"55\",\"0.527\",\"8\",\"24\",\"0.333\",\"21\",\"31\",\"0.677\",\"0.6\",\"5\",\"6\",\"0.833\",\"9\",\"35\",\"44\",\"10\",\"7\",\"2\",\"5\",\"20\",\"71\",\"SF\"],[\"16.0\",\"JavonteGreen\",\"27.0\",\"16\",\"0.0\",\"128\",\"14\",\"31\",\"0.452\",\"3\",\"8\",\"0.375\",\"11\",\"23\",\"0.478\",\"0.5\",\"10\",\"10\",\"1.0\",\"6\",\"13\",\"19\",\"6\",\"10\",\"4\",\"6\",\"13\",\"41\",\"PG\"],[\"17.0\",\"LukeKornet\",\"25.0\",\"13\",\"0.0\",\"94\",\"9\",\"27\",\"0.333\",\"6\",\"23\",\"0.261\",\"3\",\"4\",\"0.75\",\"0.444\",\"2\",\"4\",\"0.5\",\"1\",\"14\",\"15\",\"4\",\"2\",\"7\",\"1\",\"1\",\"26\",\"PF\"],[\"18.0\",\"CristianoFel\\u00edcio\",\"28.0\",\"18\",\"0.0\",\"84\",\"7\",\"13\",\"0.538\",\"0\",\"2\",\"0.0\",\"7\",\"11\",\"0.636\",\"0.538\",\"9\",\"16\",\"0.563\",\"10\",\"16\",\"26\",\"9\",\"4\",\"0\",\"4\",\"10\",\"23\",\"C\"],[\"19.0\",\"Al-FarouqAminu\",\"30.0\",\"6\",\"0.0\",\"67\",\"2\",\"10\",\"0.2\",\"1\",\"6\",\"0.167\",\"1\",\"4\",\"0.25\",\"0.25\",\"4\",\"5\",\"0.8\",\"2\",\"17\",\"19\",\"2\",\"2\",\"0\",\"3\",\"7\",\"9\",\"PF\"],[\"20.0\",\"ChandlerHutchison\",\"24.0\",\"7\",\"0.0\",\"64\",\"5\",\"18\",\"0.278\",\"1\",\"3\",\"0.333\",\"4\",\"15\",\"0.267\",\"0.306\",\"2\",\"2\",\"1.0\",\"1\",\"19\",\"20\",\"4\",\"1\",\"0\",\"5\",\"9\",\"13\",\"SF\"],[\"21.0\",\"AdamMokoka\",\"22.0\",\"14\",\"0.0\",\"56\",\"7\",\"19\",\"0.368\",\"1\",\"10\",\"0.1\",\"6\",\"9\",\"0.667\",\"0.395\",\"0\",\"1\",\"0.0\",\"1\",\"4\",\"5\",\"5\",\"2\",\"1\",\"5\",\"5\",\"15\",\"SG\"],[\"22.0\",\"DevonDotson\",\"21.0\",\"11\",\"0.0\",\"50\",\"11\",\"21\",\"0.524\",\"1\",\"7\",\"0.143\",\"10\",\"14\",\"0.714\",\"0.548\",\"0\",\"0\",\"\",\"2\",\"3\",\"5\",\"7\",\"4\",\"0\",\"0\",\"3\",\"23\",\"PG\"],[null]]"}


echo json_encode($response);




?>